"use strict";(()=>{var d=class{constructor(){this.boardWidth=7;this.boardLength=6}},r=new d,p=[];for(let e=0;e<r.boardWidth;e++){let l=null;for(let n=0;n<r.boardLength;n++){let o=null}}function h(){return console.log("getBoard was called"),p}function u(e){p=e,console.log("setBoard was called")}function w(){let e=document.getElementById("grid");for(let l=0;l<r.boardWidth;l++){let n=document.createElement("div");n.id=`row-${l}`,n.className="row";for(let o=0;o<r.boardLength;o++){let a=document.createElement("div");a.id=`row-${l}-column-${o}`,a.className="column",n.appendChild(a)}e==null||e.appendChild(n)}}var c="nought",f="cross",b="nobody";var m;function x(e,l,n,o,a){return o[e][l]!=null||(n==!1&&(o[e][l]=a),console.log(`takeTurn was called with row: ${e}, column: ${l}`)),o}function C(e){return e=="nought"||e==null?e="cross":e="nought",console.log("Switch player called. Current player is",e),e}function v(e){let l=e.length;for(let t=0;t<l;t++){if(e[t].every(i=>i===e[t][0]&&i!==null))return e[t][0];let s=!0;for(let i=0;i<l;i++)if(e[i][t]!==e[0][t]||e[i][t]===null){s=!1;break}if(s)return e[0][t]}let n=!0;for(let t=0;t<l;t++)if(e[t][t]!==e[0][0]||e[t][t]===null){n=!1;break}if(n)return e[0][0];let o=!0;for(let t=0;t<l;t++)if(e[t][l-1-t]!==e[0][l-1]||e[t][l-1-t]===null){o=!1;break}if(o)return e[0][l-1];if((t=>t.some(s=>s.some(i=>i===null)))(e)==!1)return"nobody";console.log("checkWinner was called")}function g(){u([[null,null,null],[null,null,null],[null,null,null]]),m="cross",console.log("resetGame was called")}function y(){return m}function P(e){m=e}function $(){return!1}var W=document.getElementById("winner-name"),E=document.getElementById("winner-display"),T=[c,f,null],k=[c,f,b];w();function G(){for(let e=0;e<r.boardWidth;e++)for(let l=0;l<r.boardLength;l++)document.getElementById(`row-${e}-column-${l}`).innerHTML=""}function L(e){console.log("populateHtmlGridWithBoardState was called with",e),G();for(let l=0;l<r.boardWidth;l++)for(let n=0;n<r.boardLength;n++){if(!e[l][n])continue;let o=e[l][n]===c?"\u2B55":"\u274C";document.getElementById(`row-${l}-column-${n}`).innerText=o}}function I(e){return Array.isArray(e)&&e.length===6}function N(e){return I(e)&&e.every(function(l){return T.includes(l)})}function O(e,l){console.log(`positionClick was called with rowIndex=${e}, columnIndex=${l},`);let n=x(e,l,$(),h(),y());if(u(n),P(C(y())),!I(n[0])||!n.every(N))throw`Expecting "getBoard" to return a 2d array where all values are one of the strings ${T}. Actually received: ${JSON.stringify(n)}`;L(n);let o=v(n);if(o){if(typeof o!="string"||!k.includes(o))throw`Expecting "checkWinner" to return null or one of the strings ${k}. Actually received: ${o}`;W.innerText=o,E.style.display="block"}}function V(e){g(),W.innerText="",E.style.display="None",G()}for(let e=0;e<r.boardWidth;e++)for(let l=0;l<r.boardLength;l++)document.getElementById(`row-${e}-column-${l}`).addEventListener("click",O.bind(null,e,l));var H=document.getElementById("reset-button");H.addEventListener("click",V);g();})();
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vYm9hcmQudHMiLCAiLi4vYWNhZGVteS50cyIsICIuLi9jb25uZWN0b3JzLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIvLyBNYWtlIHlvdXIgY2hhbmdlcyB0byBzdG9yZSBhbmQgZ2FtZSBzdGF0ZSBpbiB0aGlzIGZpbGVcblxuZXhwb3J0IHR5cGUgUGxheWVyID0gJ25vdWdodCcgfCAnY3Jvc3MnIHwgJ25vYm9keScgfCB1bmRlZmluZWRcbmV4cG9ydCB0eXBlIENlbGwgPSBudW1iZXIgfCBQbGF5ZXIgfCBudWxsXG5cbmV4cG9ydCBjbGFzcyBTZXR0aW5nc3tcbiAgYm9hcmRXaWR0aDpudW1iZXI9NztcbiAgYm9hcmRMZW5ndGg6bnVtYmVyPTY7XG59XG5cbmV4cG9ydCBjb25zdCBzZXR0aW5ncyA9IG5ldyBTZXR0aW5ncygpXG5cblxubGV0IGJvYXJkOkNlbGxbXVtdID1bXVxuIGZvcihsZXQgcm93ID0gMDsgcm93IDwgc2V0dGluZ3MuYm9hcmRXaWR0aDsgcm93Kyspe1xuICBsZXQgcm93ID0gbnVsbFxuICBmb3IobGV0IGNvbCA9IDA7IGNvbDwgc2V0dGluZ3MuYm9hcmRMZW5ndGg7IGNvbCsrKXtcbiAgICBsZXQgY29sID0gbnVsbFxuICB9XG4gfVxuXG4vLyBSZXR1cm4gdGhlIGN1cnJlbnQgYm9hcmQgc3RhdGUgd2l0aCBlaXRoZXIgYSBub3VnaHRUZXh0IG9yIGEgY3Jvc3NUZXh0IGluXG4vLyBlYWNoIHBvc2l0aW9uLiBQdXQgYSBudWxsIGluIGEgcG9zaXRpb24gdGhhdCBoYXNuJ3QgYmVlbiBwbGF5ZWQgeWV0LlxuXG4vL3JldHJpZXZlIHRoZSBib2FyZFxuZXhwb3J0IGZ1bmN0aW9uIGdldEJvYXJkKCk6IENlbGxbXVtdIHtcbiAgY29uc29sZS5sb2coJ2dldEJvYXJkIHdhcyBjYWxsZWQnKVxucmV0dXJuIGJvYXJkXG59XG5cbi8vb3ZlcndyaXRlIGJvYXJkIHdpdGggbmV3IGJvYXJkXG5leHBvcnQgZnVuY3Rpb24gc2V0Qm9hcmQobmV3Qm9hcmQ6IENlbGxbXVtdKSB7XG4gIGJvYXJkID0gbmV3Qm9hcmRcbiAgY29uc29sZS5sb2coJ3NldEJvYXJkIHdhcyBjYWxsZWQnKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZHJhd0JvYXJkKCl7IFxuICBjb25zdCBncmlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJncmlkXCIpXG5cbiAgZm9yIChsZXQgcm93ID0gMDsgcm93PCBzZXR0aW5ncy5ib2FyZFdpZHRoOyByb3cgKyspe1xuICAgIGxldCByb3dFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICByb3dFbGVtZW50LmlkID0gYHJvdy0ke3Jvd31gO1xuICAgIHJvd0VsZW1lbnQuY2xhc3NOYW1lID0gXCJyb3dcIlxuXG4gICAgZm9yIChsZXQgY29sdW1uID0gMDsgY29sdW1uIDwgc2V0dGluZ3MuYm9hcmRMZW5ndGg7IGNvbHVtbiArKyl7XG4gICAgICBsZXQgY29sdW1uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBjb2x1bW5FbGVtZW50LmlkID0gYHJvdy0ke3Jvd30tY29sdW1uLSR7Y29sdW1ufWA7XG4gICAgICBjb2x1bW5FbGVtZW50LmNsYXNzTmFtZSA9IFwiY29sdW1uXCJcbiAgICAgIHJvd0VsZW1lbnQuYXBwZW5kQ2hpbGQoY29sdW1uRWxlbWVudClcbiAgICB9XG4gICAgZ3JpZD8uYXBwZW5kQ2hpbGQocm93RWxlbWVudClcbiAgfVxuXG59XG4iLCAiLy9cbi8vIE1ha2UgeW91ciBjaGFuZ2VzIHRvIHN0b3JlIGFuZCB1cGRhdGUgZ2FtZSBzdGF0ZSBpbiB0aGlzIGZpbGVcblxuaW1wb3J0IHsgUGxheWVyLCBDZWxsLCBnZXRCb2FyZCwgc2V0Qm9hcmQgfSBmcm9tICcuL2JvYXJkJ1xuXG5leHBvcnQgY29uc3Qgbm91Z2h0VGV4dCA9ICdub3VnaHQnXG5leHBvcnQgY29uc3QgY3Jvc3NUZXh0ID0gJ2Nyb3NzJ1xuZXhwb3J0IGNvbnN0IG5vYm9keVRleHQgPSAnbm9ib2R5J1xuXG5sZXQgY3VycmVudEdhbWVPdmVyID0gZmFsc2VcbmxldCBjdXJyZW50UGxheWVyOmFueSA9IHVuZGVmaW5lZFxuXG5cbi8vIFRha2UgdGhlIHJvdyBhbmQgY29sdW1uIG51bWJlciBhbmQgdXBkYXRlIHRoZSBnYW1lIHN0YXRlLlxuZXhwb3J0IGZ1bmN0aW9uIHRha2VUdXJuKHJvd0luZGV4OiBudW1iZXIsIGNvbHVtbkluZGV4OiBudW1iZXIsXG4gIGN1cnJlbnRHYW1lT3ZlcjogYm9vbGVhbiwgY3VycmVudEJvYXJkOiBDZWxsW11bXSwgY3VycmVudFBsYXllcjogUGxheWVyKTogQ2VsbFtdW10ge1xuXG4gICAgaWYgKGN1cnJlbnRCb2FyZFtyb3dJbmRleF1bY29sdW1uSW5kZXhdICE9IG51bGwpe1xuICAgICAgcmV0dXJuIGN1cnJlbnRCb2FyZFxuICAgIH1cbiAgICBcbiAgICBlbHNlIGlmXG4gICAgKGN1cnJlbnRHYW1lT3ZlciA9PSBmYWxzZSl7IFxuICAgICAgY3VycmVudEJvYXJkW3Jvd0luZGV4XVtjb2x1bW5JbmRleF0gPSBjdXJyZW50UGxheWVyXG4gICAgfVxuICBcbiAgY29uc29sZS5sb2coYHRha2VUdXJuIHdhcyBjYWxsZWQgd2l0aCByb3c6ICR7cm93SW5kZXh9LCBjb2x1bW46ICR7Y29sdW1uSW5kZXh9YCkgLy8ga2VlcCB0aGlzIGxpbmUgXG4gIHJldHVybiBjdXJyZW50Qm9hcmRcbiAgfVxuXG4vLyBTd2l0Y2hlcyBhbmQgc2V0cyBwbGF5ZXIgdG8gYWx0ZXJuYXRlIGJldHdlZW4gXCJub3VnaHRcIiBhbmQgXCJjcm9zc1wiXG5leHBvcnQgZnVuY3Rpb24gc3dpdGNoUGxheWVyKGN1cnJlbnRQbGF5ZXI6IFBsYXllcik6IFBsYXllciB7XG5cbiAgaWYgKGN1cnJlbnRQbGF5ZXIgPT0gJ25vdWdodCcgfHwgY3VycmVudFBsYXllciA9PSB1bmRlZmluZWQpIHtcbiAgICBjdXJyZW50UGxheWVyID0gXCJjcm9zc1wiXG4gIH1cbiAgZWxzZSB7Y3VycmVudFBsYXllciA9IFwibm91Z2h0XCJ9XG5cbiAgY29uc29sZS5sb2coJ1N3aXRjaCBwbGF5ZXIgY2FsbGVkLiBDdXJyZW50IHBsYXllciBpcycsIGN1cnJlbnRQbGF5ZXIpXG5cbiAgcmV0dXJuIGN1cnJlbnRQbGF5ZXJcbn1cblxuLy8gUmV0dXJuIGVpdGhlciAnbm91Z2h0JywgJ2Nyb3NzJyBvciAnbm9ib2R5JyBpZiB0aGUgZ2FtZSBpcyBvdmVyLlxuLy8gT3RoZXJ3aXNlIHJldHVybiBudWxsIHRvIGNvbnRpbnVlIHBsYXlpbmcuXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tXaW5uZXIoY3VycmVudEJvYXJkOiBDZWxsW11bXSk6IFBsYXllciB7XG5cbi8vYXNzdW1lcyBuKm4gc2hhcGUgYm9hcmRcbmNvbnN0IG4gPSBjdXJyZW50Qm9hcmQubGVuZ3RoXG5cbi8vY2hlY2sgcm93cyBhbmQgY29sdW1uc1xuZm9yIChsZXQgaSA9IDA7IGkgPG47IGkrKyl7XG5cbiAgLy9jaGVjayByb3cgXG4gIGlmKGN1cnJlbnRCb2FyZFtpXS5ldmVyeShjZWxsID0+IGNlbGwgPT09IGN1cnJlbnRCb2FyZFtpXVswXSYmIGNlbGwgIT09IG51bGwpKXtcbiAgICByZXR1cm4gY3VycmVudEJvYXJkW2ldWzBdIGFzIFBsYXllclxuICB9XG4gICBcbiAvLyBjaGVjayBjb2x1bW4gXG4gIGxldCBjb2x1bW5XaW4gPSB0cnVlO1xuICBmb3IgKGxldCBqID0gMDsgaiA8IG47IGorKykge1xuICAgICAgaWYgKGN1cnJlbnRCb2FyZFtqXVtpXSAhPT0gY3VycmVudEJvYXJkWzBdW2ldIHx8IGN1cnJlbnRCb2FyZFtqXVtpXSA9PT0gbnVsbCkge1xuICAgICAgICAgIGNvbHVtbldpbiA9IGZhbHNlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICB9XG4gIGlmIChjb2x1bW5XaW4pIHtcbiAgICAgIHJldHVybiBjdXJyZW50Qm9hcmRbMF1baV0gYXMgUGxheWVyXG4gIH1cbn1cbiAgXG4vLyBjaGVjayBtYWluIGRpYWdvbmFsIHdpblxubGV0IG1haW5EaWFnb25hbFdpbiA9IHRydWU7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7XG4gICAgICBpZiAoY3VycmVudEJvYXJkW2ldW2ldICE9PSBjdXJyZW50Qm9hcmRbMF1bMF0gfHwgY3VycmVudEJvYXJkW2ldW2ldID09PSBudWxsKSB7XG4gICAgICAgICAgbWFpbkRpYWdvbmFsV2luID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gIGlmIChtYWluRGlhZ29uYWxXaW4pIHtcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRCb2FyZFswXVswXSBhcyBQbGF5ZXI7XG4gIH1cblxuLy9jaGVjayBhbnRpLWRpYWdcbmxldCBhbnRpRGlhZ29uYWxXaW4gPSB0cnVlO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IG47IGkrKykge1xuICAgICAgaWYgKGN1cnJlbnRCb2FyZFtpXVtuIC0gMSAtIGldICE9PSBjdXJyZW50Qm9hcmRbMF1bbiAtIDFdIHx8IGN1cnJlbnRCb2FyZFtpXVtuIC0gMSAtIGldID09PSBudWxsKSB7XG4gICAgICAgICAgYW50aURpYWdvbmFsV2luID0gZmFsc2VcbiAgICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgfVxuICBpZiAoYW50aURpYWdvbmFsV2luKSB7XG4gICAgICByZXR1cm4gY3VycmVudEJvYXJkWzBdW24gLSAxXSBhcyBQbGF5ZXI7XG4gIH1cblxuLy8gY2hlY2sgZm9yIG51bGxcbiAgbGV0IGhhc051bGxWYWx1ZXMgPSAoY3VycmVudEJvYXJkOkNlbGxbXVtdKTpib29sZWFuID0+IHtcbiAgICByZXR1cm4gY3VycmVudEJvYXJkLnNvbWUocm93ID0+IHJvdy5zb21lIChjZWxsID0+IGNlbGwgPT09IG51bGwpKVxuICB9XG4gIGlmIChoYXNOdWxsVmFsdWVzKGN1cnJlbnRCb2FyZCkgPT0gZmFsc2UpIHtcbiAgICByZXR1cm4gXCJub2JvZHlcIlxuICB9XG4gIGNvbnNvbGUubG9nKFwiY2hlY2tXaW5uZXIgd2FzIGNhbGxlZFwiKVxufVxuXG4vLyBTZXQgdGhlIGdhbWUgc3RhdGUgYmFjayB0byBpdHMgb3JpZ2luYWwgc3RhdGUgdG8gcGxheSBhbm90aGVyIGdhbWUuXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRHYW1lKCkge1xuICBzZXRCb2FyZChbW251bGwsIG51bGwsIG51bGxdLCBbbnVsbCwgbnVsbCwgbnVsbF0sIFtudWxsLCBudWxsLCBudWxsXV0pXG4gIGN1cnJlbnRQbGF5ZXIgPSBcImNyb3NzXCJcbiAgY29uc29sZS5sb2coJ3Jlc2V0R2FtZSB3YXMgY2FsbGVkJykgLy8ga2VlcCB0aGlzIGxpbmUgaGVyZVxufVxuXG4vLyBSZXR1cm4gdGhlIGN1cnJlbnQgcGxheWVyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q3VycmVudFBsYXllcigpOiBQbGF5ZXIge1xuICByZXR1cm4gY3VycmVudFBsYXllclxufVxuXG4vLyBVcGRhdGUgY3VycmVudCBwbGF5ZXJcbmV4cG9ydCBmdW5jdGlvbiBzZXRDdXJyZW50UGxheWVyKG5ld0N1cnJlbnRQbGF5ZXI6IFBsYXllcil7XG4gIGN1cnJlbnRQbGF5ZXIgPSBuZXdDdXJyZW50UGxheWVyXG59XG5cbi8vIFJldHVybiB0aGUgY3VycmVudCBnYW1lIHN0YXRlXG5leHBvcnQgZnVuY3Rpb24gZ2V0R2FtZU92ZXIoKTogYm9vbGVhbiB7IFxuICByZXR1cm4gZmFsc2Vcbn1cblxuLy8gU2V0IHRoZSBjdXJyZW50IGdhbWUgc3RhdGVcbmV4cG9ydCBmdW5jdGlvbiBzZXRHYW1lT3ZlcihuZXdHYW1lT3ZlcjogYm9vbGVhbikge31cbiIsICIvLyBUaGlzIGZpbGUgY29udGFpbnMgaGVscGVyIGNvZGUgYmV5b25kIHRoZSBmaXJzdCB3ZWVrICdJbnRybyB0byBKYXZhU2NyaXB0JyBjb3Vyc2UgY29udGVudC5cbi8vIFlvdSBzaG91bGQgbm90IGhhdmUgdG8gbWFrZSBhbnkgY2hhbmdlcyBpbiB0aGlzIGZpbGUgdG8gZ2V0IHlvdXIgZ2FtZSB3b3JraW5nLlxuXG5pbXBvcnQgeyBQbGF5ZXIsIENlbGwsIGdldEJvYXJkLCBzZXRCb2FyZCwgZHJhd0JvYXJkLCBzZXR0aW5ncyB9IGZyb20gJy4vYm9hcmQnXG5cbmltcG9ydCB7IGNoZWNrV2lubmVyLCBjcm9zc1RleHQsIGdldEN1cnJlbnRQbGF5ZXIsIGdldEdhbWVPdmVyLCBub3VnaHRUZXh0LCByZXNldEdhbWUsIHNldEN1cnJlbnRQbGF5ZXIsIHN3aXRjaFBsYXllciwgdGFrZVR1cm4sIG5vYm9keVRleHQgfSBmcm9tICcuL2FjYWRlbXknXG5cbmNvbnN0IHdpbm5lck5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2lubmVyLW5hbWUnKSFcbmNvbnN0IHdpbm5lckRpc3BsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2lubmVyLWRpc3BsYXknKSFcbmNvbnN0IHZhbGlkQ2VsbFZhbHVlczogQ2VsbFtdID0gW25vdWdodFRleHQsIGNyb3NzVGV4dCwgbnVsbF1cbmNvbnN0IHZhbGlkV2luVmFsdWVzOiBDZWxsW10gPSBbbm91Z2h0VGV4dCwgY3Jvc3NUZXh0LCBub2JvZHlUZXh0XVxuXG5kcmF3Qm9hcmQoKTtcblxuLy8gQ2xlYXIgZG93biB0aGUgZWxlbWVudHMgZHJhd24gb24gdGhlIGJvYXJkLlxuZnVuY3Rpb24gY2xlYXJIdG1sR3JpZCgpIHtcbiAgZm9yIChsZXQgcm93SW5kZXggPSAwOyByb3dJbmRleCA8IHNldHRpbmdzLmJvYXJkV2lkdGg7IHJvd0luZGV4KyspIHtcbiAgICBmb3IgKGxldCBjb2x1bW5JbmRleCA9IDA7IGNvbHVtbkluZGV4IDwgc2V0dGluZ3MuYm9hcmRMZW5ndGg7IGNvbHVtbkluZGV4KyspIHtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGByb3ctJHtyb3dJbmRleH0tY29sdW1uLSR7Y29sdW1uSW5kZXh9YCkhLmlubmVySFRNTCA9ICcnXG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHBvcHVsYXRlSHRtbEdyaWRXaXRoQm9hcmRTdGF0ZShib2FyZDogQ2VsbFtdW10pIHtcbiAgY29uc29sZS5sb2coJ3BvcHVsYXRlSHRtbEdyaWRXaXRoQm9hcmRTdGF0ZSB3YXMgY2FsbGVkIHdpdGgnLCBib2FyZClcbiAgXG4gIGNsZWFySHRtbEdyaWQoKVxuICBmb3IgKGxldCByb3dJbmRleCA9IDA7IHJvd0luZGV4IDwgc2V0dGluZ3MuYm9hcmRXaWR0aDsgcm93SW5kZXgrKykge1xuICAgIGZvciAobGV0IGNvbHVtbkluZGV4ID0gMDsgY29sdW1uSW5kZXggPCBzZXR0aW5ncy5ib2FyZExlbmd0aDsgY29sdW1uSW5kZXgrKykge1xuICAgICAgaWYgKCFib2FyZFtyb3dJbmRleF1bY29sdW1uSW5kZXhdKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG4gICAgICBjb25zdCBjZWxsVGV4dCA9IGJvYXJkW3Jvd0luZGV4XVtjb2x1bW5JbmRleF0gPT09IG5vdWdodFRleHQgPyAnXHUyQjU1JyA6ICdcdTI3NEMnXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgcm93LSR7cm93SW5kZXh9LWNvbHVtbi0ke2NvbHVtbkluZGV4fWApIS5pbm5lclRleHQgPSBjZWxsVGV4dFxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBpc1ZhbGlkUm93T3JDb2x1bW4oYXJyYXlPZkNlbGxzOiBDZWxsW10pIHtcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkoYXJyYXlPZkNlbGxzKSAmJiBhcnJheU9mQ2VsbHMubGVuZ3RoID09PSA2XG59XG5cbmZ1bmN0aW9uIGlzVmFsaWRDb2x1bW4oY29sdW1uQXJyYXk6IENlbGxbXSkge1xuICByZXR1cm4gaXNWYWxpZFJvd09yQ29sdW1uKGNvbHVtbkFycmF5KSBcbiAgICAgICAgJiYgY29sdW1uQXJyYXkuZXZlcnkoZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuIHZhbGlkQ2VsbFZhbHVlcy5pbmNsdWRlcyhpdGVtKSB9KVxufVxuXG4vLyBBIGdyaWQgcG9zaXRpb24gd2FzIGNsaWNrZWQgY2FsbCB0aGUgZ2FtZSdzIHR1cm4gZnVuY3Rpb24sIHJlZHJhdyBhbmQgdGhlbiBjaGVjayBmb3IgYSB3aW5uZXIuXG5mdW5jdGlvbiBwb3NpdGlvbkNsaWNrKHJvdzogbnVtYmVyLCBjb2x1bW46IG51bWJlcikge1xuICBjb25zb2xlLmxvZyhgcG9zaXRpb25DbGljayB3YXMgY2FsbGVkIHdpdGggcm93SW5kZXg9JHtyb3d9LCBjb2x1bW5JbmRleD0ke2NvbHVtbn0sYClcbiAgLy9yb3csIGNvbHVtbiwgY3VycmVudEdhbWVPdmVyLCBjdXJyZW50Qm9hcmQsIGN1cnJlbnRQbGF5ZXJcbiAgY29uc3QgYm9hcmQgPSB0YWtlVHVybihyb3csIGNvbHVtbiwgZ2V0R2FtZU92ZXIoKSwgZ2V0Qm9hcmQoKSwgZ2V0Q3VycmVudFBsYXllcigpKVxuICBzZXRCb2FyZChib2FyZClcbiAgc2V0Q3VycmVudFBsYXllcihzd2l0Y2hQbGF5ZXIoZ2V0Q3VycmVudFBsYXllcigpKSlcbiAgICBcbiAgaWYgKCFpc1ZhbGlkUm93T3JDb2x1bW4oYm9hcmRbMF0pIHx8ICFib2FyZC5ldmVyeShpc1ZhbGlkQ29sdW1uKSkge1xuICAgIHRocm93IGBFeHBlY3RpbmcgXCJnZXRCb2FyZFwiIHRvIHJldHVybiBhIDJkIGFycmF5IHdoZXJlIGFsbCB2YWx1ZXMgYXJlIG9uZSBvZiB0aGUgc3RyaW5ncyAke3ZhbGlkQ2VsbFZhbHVlc30uIEFjdHVhbGx5IHJlY2VpdmVkOiAke0pTT04uc3RyaW5naWZ5KGJvYXJkKX1gXG4gIH1cbiAgcG9wdWxhdGVIdG1sR3JpZFdpdGhCb2FyZFN0YXRlKGJvYXJkKVxuICBjb25zdCB3aW5uZXIgPSBjaGVja1dpbm5lcihib2FyZClcbiAgaWYgKHdpbm5lcikge1xuICAgIGlmICh0eXBlb2Ygd2lubmVyICE9PSAnc3RyaW5nJyB8fCAhdmFsaWRXaW5WYWx1ZXMuaW5jbHVkZXMod2lubmVyKSkge1xuICAgICAgdGhyb3cgYEV4cGVjdGluZyBcImNoZWNrV2lubmVyXCIgdG8gcmV0dXJuIG51bGwgb3Igb25lIG9mIHRoZSBzdHJpbmdzICR7dmFsaWRXaW5WYWx1ZXN9LiBBY3R1YWxseSByZWNlaXZlZDogJHt3aW5uZXJ9YFxuICAgIH1cbiAgICB3aW5uZXJOYW1lLmlubmVyVGV4dCA9IHdpbm5lclxuICAgIHdpbm5lckRpc3BsYXkuc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgfVxufVxuXG4vLyBUaGUgcmVzZXQgYnV0dG9uIHdhcyBjbGlja2VkLCBjYWxsIHRoZSBnYW1lJ3MgcmVzZXQgZnVuY3Rpb24gdGhlbiByZXNldCB0aGUgRE9NLlxuZnVuY3Rpb24gcmVzZXRDbGljayhldmVudDogYW55KSB7XG4gIHJlc2V0R2FtZSgpXG4gIHdpbm5lck5hbWUuaW5uZXJUZXh0ID0gJydcbiAgd2lubmVyRGlzcGxheS5zdHlsZS5kaXNwbGF5ID0gJ05vbmUnXG4gIGNsZWFySHRtbEdyaWQoKVxufVxuXG4vLyBCaW5kIHRoZSBjbGljayBldmVudHMgZm9yIHRoZSBncmlkLlxuZm9yIChsZXQgcm93SW5kZXggPSAwOyByb3dJbmRleCA8IHNldHRpbmdzLmJvYXJkV2lkdGg7IHJvd0luZGV4KyspIHtcbiAgZm9yIChsZXQgY29sdW1uSW5kZXggPSAwOyBjb2x1bW5JbmRleCA8IHNldHRpbmdzLmJvYXJkTGVuZ3RoOyBjb2x1bW5JbmRleCsrKSB7XG4gICAgY29uc3QgZ3JpZFBvc2l0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHJvdy0ke3Jvd0luZGV4fS1jb2x1bW4tJHtjb2x1bW5JbmRleH1gKSFcbiAgICBncmlkUG9zaXRpb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBwb3NpdGlvbkNsaWNrLmJpbmQobnVsbCwgcm93SW5kZXgsIGNvbHVtbkluZGV4KSlcbiAgfVxufVxuXG4vLyBCaW5kIHRoZSBjbGljayBldmVudCBmb3IgdGhlIHJlc2V0IGJ1dHRvbi5cbmNvbnN0IHJlc2V0QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc2V0LWJ1dHRvbicpIVxucmVzZXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCByZXNldENsaWNrKVxuXG4vLyBpbml0aWFsaXNlIHRoZSBzdGF0ZVxucmVzZXRHYW1lKClcbiJdLAogICJtYXBwaW5ncyI6ICJtQkFLTyxJQUFNQSxFQUFOLEtBQWMsQ0FBZCxjQUNMLGdCQUFrQixFQUNsQixpQkFBbUIsRUFDckIsRUFFYUMsRUFBVyxJQUFJRCxFQUd4QkUsRUFBZ0IsQ0FBQyxFQUNwQixRQUFRQyxFQUFNLEVBQUdBLEVBQU1GLEVBQVMsV0FBWUUsSUFBTSxDQUNqRCxJQUFJQSxFQUFNLEtBQ1YsUUFBUUMsRUFBTSxFQUFHQSxFQUFLSCxFQUFTLFlBQWFHLElBQU0sQ0FDaEQsSUFBSUEsRUFBTSxJQUNaLENBQ0QsQ0FNTSxTQUFTQyxHQUFxQixDQUNuQyxlQUFRLElBQUkscUJBQXFCLEVBQzVCSCxDQUNQLENBR08sU0FBU0ksRUFBU0MsRUFBb0IsQ0FDM0NMLEVBQVFLLEVBQ1IsUUFBUSxJQUFJLHFCQUFxQixDQUNuQyxDQUVPLFNBQVNDLEdBQVcsQ0FDekIsSUFBTUMsRUFBTyxTQUFTLGVBQWUsTUFBTSxFQUUzQyxRQUFTTixFQUFNLEVBQUdBLEVBQUtGLEVBQVMsV0FBWUUsSUFBTyxDQUNqRCxJQUFJTyxFQUFhLFNBQVMsY0FBYyxLQUFLLEVBQzdDQSxFQUFXLEdBQUssT0FBT1AsSUFDdkJPLEVBQVcsVUFBWSxNQUV2QixRQUFTQyxFQUFTLEVBQUdBLEVBQVNWLEVBQVMsWUFBYVUsSUFBVSxDQUM1RCxJQUFJQyxFQUFnQixTQUFTLGNBQWMsS0FBSyxFQUNoREEsRUFBYyxHQUFLLE9BQU9ULFlBQWNRLElBQ3hDQyxFQUFjLFVBQVksU0FDMUJGLEVBQVcsWUFBWUUsQ0FBYSxDQUN0QyxDQUNBSCxHQUFBLE1BQUFBLEVBQU0sWUFBWUMsRUFDcEIsQ0FFRixDQ2hETyxJQUFNRyxFQUFhLFNBQ2JDLEVBQVksUUFDWkMsRUFBYSxTQUcxQixJQUFJQyxFQUlHLFNBQVNDLEVBQVNDLEVBQWtCQyxFQUN6Q0MsRUFBMEJDLEVBQXdCTCxFQUFpQyxD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QUFjLE1BQU0sUUFBVSxPQUM5Qk8sRUFBYyxDQUNoQixDQUdBLFFBQVNDLEVBQVcsRUFBR0EsRUFBV0MsRUFBUyxXQUFZRCxJQUNyRCxRQUFTRSxFQUFjLEVBQUdBLEVBQWNELEVBQVMsWUFBYUMsSUFDdkMsU0FBUyxlQUFlLE9BQU9GLFlBQW1CRSxHQUFhLEVBQ3ZFLGlCQUFpQixRQUFTUyxFQUFjLEtBQUssS0FBTVgsRUFBVUUsQ0FBVyxDQUFDLEVBSzFGLElBQU13QixFQUFjLFNBQVMsZUFBZSxjQUFjLEVBQzFEQSxFQUFZLGlCQUFpQixRQUFTSCxDQUFVLEVBR2hERSxFQUFVIiwKICAibmFtZXMiOiBbIlNldHRpbmdzIiwgInNldHRpbmdzIiwgImJvYXJkIiwgInJvdyIsICJjb2wiLCAiZ2V0Qm9hcmQiLCAic2V0Qm9hcmQiLCAibmV3Qm9hcmQiLCAiZHJhd0JvYXJkIiwgImdyaWQiLCAicm93RWxlbWVudCIsICJjb2x1bW4iLCAiY29sdW1uRWxlbWVudCIsICJub3VnaHRUZXh0IiwgImNyb3NzVGV4dCIsICJub2JvZHlUZXh0IiwgImN1cnJlbnRQbGF5ZXIiLCAidGFrZVR1cm4iLCAicm93SW5kZXgiLCAiY29sdW1uSW5kZXgiLCAiY3VycmVudEdhbWVPdmVyIiwgImN1cnJlbnRCb2FyZCIsICJzd2l0Y2hQbGF5ZXIiLCAiY2hlY2tXaW5uZXIiLCAibiIsICJpIiwgImNlbGwiLCAiY29sdW1uV2luIiwgImoiLCAibWFpbkRpYWdvbmFsV2luIiwgImFudGlEaWFnb25hbFdpbiIsICJyb3ciLCAicmVzZXRHYW1lIiwgInNldEJvYXJkIiwgImdldEN1cnJlbnRQbGF5ZXIiLCAic2V0Q3VycmVudFBsYXllciIsICJuZXdDdXJyZW50UGxheWVyIiwgImdldEdhbWVPdmVyIiwgIndpbm5lck5hbWUiLCAid2lubmVyRGlzcGxheSIsICJ2YWxpZENlbGxWYWx1ZXMiLCAibm91Z2h0VGV4dCIsICJjcm9zc1RleHQiLCAidmFsaWRXaW5WYWx1ZXMiLCAibm9ib2R5VGV4dCIsICJkcmF3Qm9hcmQiLCAiY2xlYXJIdG1sR3JpZCIsICJyb3dJbmRleCIsICJzZXR0aW5ncyIsICJjb2x1bW5JbmRleCIsICJwb3B1bGF0ZUh0bWxHcmlkV2l0aEJvYXJkU3RhdGUiLCAiYm9hcmQiLCAiY2VsbFRleHQiLCAiaXNWYWxpZFJvd09yQ29sdW1uIiwgImFycmF5T2ZDZWxscyIsICJpc1ZhbGlkQ29sdW1uIiwgImNvbHVtbkFycmF5IiwgIml0ZW0iLCAicG9zaXRpb25DbGljayIsICJyb3ciLCAiY29sdW1uIiwgInRha2VUdXJuIiwgImdldEdhbWVPdmVyIiwgImdldEJvYXJkIiwgImdldEN1cnJlbnRQbGF5ZXIiLCAic2V0Qm9hcmQiLCAic2V0Q3VycmVudFBsYXllciIsICJzd2l0Y2hQbGF5ZXIiLCAid2lubmVyIiwgImNoZWNrV2lubmVyIiwgInJlc2V0Q2xpY2siLCAiZXZlbnQiLCAicmVzZXRHYW1lIiwgInJlc2V0QnV0dG9uIl0KfQo=
